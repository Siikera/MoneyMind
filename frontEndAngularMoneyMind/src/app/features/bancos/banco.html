<div class="cadastro-container">
  <h2>Cadastro de Bancos</h2>
  <form (ngSubmit)="onSubmit()" autocomplete="off" class="cadastro-form">
    <label for="razaoSocial">Razão Social:</label>
    <input #razaoInput id="razaoSocial" name="razaoSocial" [(ngModel)]="razaoSocial" required />
    <button type="submit" [disabled]="loading">{{ bancoEditando ? 'Salvar Alteração' : 'Cadastrar' }}</button>
    <div *ngIf="error" class="erro">{{ error }}</div>
    <div *ngIf="success" class="success-message">
      {{ bancoEditando ? 'Alteração concluída!' : 'Cadastro concluído!' }}
    </div>
  </form>

  <div class="tabela-wrapper">
    <h3>Tabela de Bancos Cadastrados</h3>
    <table class="razoes-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Razão Social</th>
          <th>Ações</th>
        </tr>
      </thead>
      <tbody>
        <ng-container *ngFor="let banco of bancos">
          <tr>
            <td>{{ banco.idBanco }}</td>
            <td>
              <ng-container *ngIf="bancoEditando?.idBanco === banco.idBanco; else viewMode">
                <input [(ngModel)]="razaoSocial" class="edit-input" />
              </ng-container>
              <ng-template #viewMode>
                {{ banco.razaoSocial }}
              </ng-template>
            </td>
            <td>
              <ng-container *ngIf="bancoEditando?.idBanco === banco.idBanco; else actionBtns">
                <button type="button" (click)="salvarAlteracao(banco)" class="acao-btn editar">Salvar</button>
                <button type="button" (click)="cancelarEdicao()" class="acao-btn excluir">Cancelar</button>
              </ng-container>
              <ng-template #actionBtns>
                <button type="button" (click)="editarBanco(banco)" class="acao-btn editar">Alterar</button>
                <button type="button" (click)="excluirBanco(banco.idBanco ?? 0)" class="acao-btn excluir">Excluir</button>
              </ng-template>
            </td>
          </tr>
        </ng-container>
        <tr *ngIf="bancos.length === 0">
          <td colspan="3" class="empty-list">Nenhum banco cadastrado.</td>
        </tr>
      </tbody>
    </table>
    <div *ngIf="bancos.length === 0" class="empty-list">Nenhum banco cadastrado.</div>
  </div>
</div>
